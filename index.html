<html>
	<head>
	<script>
		window.addEventListener("load", function () {
		  function sendData() {
			var XHR = new XMLHttpRequest();

			// Bind the FormData object and the form element
			var FD = new FormData(form);
	
			//transform into JSON object circa 2010s
			let jsonObject = {};
			for (const [key, value]  of FD.entries()) {
				jsonObject[key] = value;
			}
			//add known fields
			jsonObject['client'] = navigator.appVersion;

			// Define what happens on successful data submission
			XHR.addEventListener("load", function(event) {
			  alert(event.target.responseText);
			});

			// Define what happens in case of error
			XHR.addEventListener("error", function(event) {
			  alert('Oops! Something went wrong.');
			});

			// Set up our request
			XHR.open("POST", "/login");

			// The data sent is what the user provided in the form
			XHR.send(JSON.stringify(jsonObject));
		  }
		 
		  // Access the form element...
		  var form = document.getElementById("myForm");

		  // ...and take over its submit event.
		  form.addEventListener("submit", function (event) {
			event.preventDefault();

			sendData();
		  });
		}); 
	</script>
		<title>Login </title>
	</head>
	<body>
		<br>
		<br>
		<center>
		<form id="myForm">
			<label for="username">username:</label>
			<input id="username" name="username">
			<br>
			<label for="password">password:</label>
			<input id="password" name="password" type="password">
			<br>
			<input type="submit" value="Login">
		</form>
		</center>
	</body>
</html>
